<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>test</title>
  </head>
  <body>
    <h1>test</h1>
    <!-- <script src="https://cdn.jsdelivr.net/npm/simple-ps@0.0.0/dist/simple-ps.js"></script> -->
    <script src="../dist/simple-ps.js"></script>
    <script>
     const ruleStr =
`/* 数当てゲームのルール */
10: s(スタート) > del(スタート) rand(秘密の答) mul(秘密の答 10 秘密の答)
    floor(秘密の答 秘密の答) st(秘密の答) log("0から9の数字を入力して！") ;

5: no(入力) > prompt(入力) ;

1: s(入力) s(秘密の答) gt(入力 秘密の答) >
   log("もっと小さな値だよ") prompt(入力) ;
1: s(入力) s(秘密の答) lt(入力 秘密の答) >
   log("もっと大きな値だよ") prompt(入力) ;
1: s(入力) s(秘密の答) eq(入力 秘密の答) >
   log("大正解！") stop() ;
`;

     class PromptBI extends SimplePS.BuiltIn {
       constructor(engine) {super("prompt",engine);}
       eval(args,env) {
         this.checkArgsNo(args,1);
         this.checkArgNVar(args,0);
         const n = prompt(args[0].name);
         env[args[0].name] = Number(n);
       }
     }
     class AlertBI extends SimplePS.BuiltIn {
       constructor(engine) {super("alert",engine);}
       eval(args,env) {
         this.checkArgsNo(args,1);
         this.checkArgNNoEmpty(args,0);
         alert(env[args[0].name]);
       }
     }
     const engine = new SimplePS.Engine(ruleStr);
     engine.addBuiltIn(new PromptBI(engine));
     engine.addBuiltIn(new AlertBI(engine));
     console.log(engine.rules);
     engine.setInfoToWM("スタート");
     engine.start();
    </script>
  </body>
</html>
